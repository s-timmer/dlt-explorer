# Customizing dlt-explorer for a new dataset

This explorer works with any dlt dataset. The visual design is generic — the dataset-specific parts live in three JSON files under `public/data/`. When loading a new dataset, regenerate these files.

## Files to generate

### 1. `descriptions.json` — AI-generated dataset descriptions

One-line descriptions for each table, shown on entity cards and detail page headers. The key is the dlt table name.

**Format:**
```json
{
  "table_name": {
    "description": "One-line description of what this table contains"
  }
}
```

**How to generate:**

Given the catalog (table names, column names, column types, row counts), write a one-line description for each table that answers: "What data is in here and how much?"

Rules:
- Lead with the most useful information — what the data represents, not what the table is called
- Include the row count naturally in the description when it adds context
- For child tables (containing `__`), describe the relationship: "Users assigned to issues — 1,841 assignments"
- Keep it to one sentence, under 80 characters when possible
- Use the data scientist's language: "records" not "rows", "fields" not "columns"
- Don't repeat the table name — the description sits right below it

**Optional `summary` field:** For tables where a date range or distribution adds value, include a `summary` string (e.g., `"Jan 2025 — Feb 2026"`). This appears as a subtle secondary line below the description.

### 2. `field_config.json` — semantic field ordering and noise filtering

Controls which fields appear in previews and how fields are sorted on the detail page.

**Format:**
```json
{
  "noise_fields": ["field1", "field2"],
  "field_priorities": {
    "identity": ["field1", "field2"],
    "content": ["field1", "field2"],
    "deprioritized_ids": ["field1", "field2"]
  }
}
```

**How to generate:**

Examine the column names across all tables and categorize them:

- **`noise_fields`** — Field name leaves (the part after the last `__`) that should be hidden from card previews. These are infrastructure fields that don't help a data scientist understand what data is available. Common examples: `id`, `node_id`, `type`. Only filter fields that are genuinely noise for *browsing* — not fields that might be useful for analysis.

- **`field_priorities.identity`** — Fields that identify what a record *is*. These appear first in the schema view and data preview. Examples: `name`, `title`, `number`, `login`, `state`, `status`, `email`. Think: "If I could only see 3 columns, which ones tell me what this record is about?"

- **`field_priorities.content`** — Fields that carry the main content or key timestamps. These appear second. Examples: `body`, `description`, `message`, `created_at`, `updated_at`, `amount`, `price`.

- **`field_priorities.deprioritized_ids`** — ID and infrastructure fields that should sort last. These are valid fields but not what you want to see first. Examples: `id`, `node_id`, `uuid`, `external_id`.

Fields not listed in any category get a default middle priority. URL fields (ending in `_url` or equal to `url`) are automatically deprioritized — no need to list them.

### 3. `metadata.json` — pipeline metadata

Already generated by the export script. One field to add:

- **`source_label`** — A human-readable label for the data source, shown in the catalog header subtitle. Examples: `"dlt-hub/dlt"`, `"Stripe production"`, `"Salesforce CRM"`. If omitted, falls back to `pipeline_name`.

## What the export script produces

The export script (`export_json.py`) reads from DuckDB and generates:

- `catalog.json` — table names, columns (name + type), row counts
- `metadata.json` — pipeline info, timestamps, schema version
- `table_[name].json` — up to 50 sample rows per table

The three files above (`descriptions.json`, `field_config.json`, `metadata.json.source_label`) need to be generated or updated on top of what the export script produces.

## Sort order explained

The detail page sorts visible columns using this priority (lower = shown first):

| Score | Category | What it means |
|-------|----------|---------------|
| 0 | Identity | Fields in `field_priorities.identity` |
| 1 | Content | Fields in `field_priorities.content` |
| 3 | General | Everything else (default) |
| 4 | Nested | Fields containing `__` (e.g., `user__login`) |
| 7 | URLs | Fields ending in `_url` or equal to `url` |
| 8 | Deprioritized IDs | Fields in `field_priorities.deprioritized_ids` |

Internal dlt fields (`_dlt_*`) are always shown last in a separate "Pipeline metadata fields" section.
